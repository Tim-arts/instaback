<div class="max-w-4xl mx-auto p-8">
  <app-header />
  <app-instructions />

  <div class="bg-gray-50 p-8 rounded-xl mb-8">
    <app-file-upload
      [inputNameLabel]="'Followers File'"
      [inputId]="'followers-file'"
      [fileNameLabel]="followersFileName()"
      [fileType]="FileTypeEnum.FOLLOWERS"
      [disabled]="isAnalysisTriggered()"
      (changeEvent)="onFollowersFileSelected($event)"
    />
    <app-file-upload
      [inputNameLabel]="'Following File'"
      [inputId]="'following-file'"
      [fileNameLabel]="followingFileName()"
      [fileType]="FileTypeEnum.FOLLOWING"
      [disabled]="isAnalysisTriggered()"
      (changeEvent)="onFollowingFileSelected($event)"
    />

    <button
      class="w-full p-4 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors mt-4"
      [disabled]="!canAnalyze()"
      (click)="startAnalysis()"
    >
      {{ analysisResult.isLoading() ? 'Analyzing...' : 'Analyze' }}
    </button>

    @if (analysisResult.error()) {
      <div class="mt-4 p-4 bg-red-50 text-red-700 rounded-lg">
        {{ analysisResult.error() }}
      </div>
    }
  </div>

  @if (analysisResult.value(); as result) {
    <app-analysis-report
      [result]="result"
      (resetAnalysis)="reset()"
    />
  }
</div>
